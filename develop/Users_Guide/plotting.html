

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>27. Plotting and Graphics Support &mdash; MET develop documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://dtcenter.github.io/MET/latest/Users_Guide/plotting.html"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MET develop documentation" href="../index.html"/>
        <link rel="up" title="User’s Guide" href="index.html"/>
        <link rel="next" title="28. References" href="refs.html"/>
        <link rel="prev" title="26. RMW-Analysis Tool" href="rmw-analysis.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MET
          

          
            
            <img src="../_static/met_logo_2019_09.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                
                  <div class="version-dropdown">
                    <select class="version-list" id="version-list">
                      <option value=''>develop</option>
                      
                        
                          <option value="../latest">latest</option>
                        
                      
                        
                      
                    </select>
                  </div>
                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Model Evaluation Tools</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">1. Overview of MET</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">2. Software Installation/Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_io.html">3. MET Data I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_options.html">4. Configuration File Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="config_options_tc.html">5. Tropical Cyclone Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="reformat_point.html">6. Re-Formatting of Point Observations</a></li>
<li class="toctree-l2"><a class="reference internal" href="reformat_grid.html">7. Re-Formatting of Gridded Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="masking.html">8. Regional Verification using Spatial Masking</a></li>
<li class="toctree-l2"><a class="reference internal" href="point-stat.html">9. Point-Stat Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid-stat.html">10. Grid-Stat Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="ensemble-stat.html">11. Ensemble-Stat Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="wavelet-stat.html">12. Wavelet-Stat Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="gsi-tools.html">13. GSI Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="stat-analysis.html">14. Stat-Analysis Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="series-analysis.html">15. Series-Analysis Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid-diag.html">16. Grid-Diag Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="mode.html">17. MODE Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="mode-analysis.html">18. MODE-Analysis Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="mode-td.html">19. MODE Time Domain Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="met-tc_overview.html">20. MET-TC Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="tc-dland.html">21. TC-Dland Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="tc-pairs.html">22. TC-Pairs Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="tc-stat.html">23. TC-Stat Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="tc-gen.html">24. TC-Gen Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="tc-rmw.html">25. TC-RMW Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="rmw-analysis.html">26. RMW-Analysis Tool</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">27. Plotting and Graphics Support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#plotting-utilities">27.1. Plotting Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#plot-point-obs-usage">27.1.1. plot_point_obs usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plot-point-obs-configuration-file">27.1.2. plot_point_obs configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">27.1.3. plot_point_obs configuration file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plot-data-plane-usage">27.1.4. plot_data_plane usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plot-mode-field-usage">27.1.5. plot_mode_field usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examples-of-plotting-met-output">27.2. Examples of plotting MET output</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#grid-stat-tool-examples">27.2.1. Grid-Stat tool examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mode-tool-examples">27.2.2. MODE tool examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tc-stat-tool-example">27.2.3. TC-Stat tool example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="refs.html">28. References</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixA.html">29. Appendix A FAQs &amp; How do I … ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixB.html">30. Appendix B Map Projections, Grids, and Polylines</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixC.html">31. Appendix C Verification Measures</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixD.html">32. Appendix D Confidence Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixE.html">33. Appendix E WWMCA Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixF.html">34. Appendix F Python Embedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixG.html">35. Appendix G Vectors and Vector Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Contributors_Guide/index.html">Contributor’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MET</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">User’s Guide</a> &raquo;</li>
        
      <li><span class="section-number">27. </span>Plotting and Graphics Support</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Users_Guide/plotting.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="plotting-and-graphics-support">
<span id="plotting"></span><h1><span class="section-number">27. </span>Plotting and Graphics Support<a class="headerlink" href="#plotting-and-graphics-support" title="Permalink to this headline">¶</a></h1>
<div class="section" id="plotting-utilities">
<h2><span class="section-number">27.1. </span>Plotting Utilities<a class="headerlink" href="#plotting-utilities" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to check your data files using plotting utilities. Point observations can be plotted using the Plot-Point-Obs utility. A single model level can be plotted using the plot_data_plane utility. For object based evaluations, the MODE objects can be plotted using plot_mode_field. Occasionally, a post-processing or timing error can lead to errors in MET. These tools can assist the user by showing the data to be verified to ensure that times and locations match up as expected.</p>
<div class="section" id="plot-point-obs-usage">
<h3><span class="section-number">27.1.1. </span>plot_point_obs usage<a class="headerlink" href="#plot-point-obs-usage" title="Permalink to this headline">¶</a></h3>
<p>The usage statement for the Plot-Point-Obs utility is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage: plot_point_obs
       nc_file
       ps_file
       [-config config_file]
       [-point_obs file]
       [-title string]
       [-plot_grid name]
       [-gc code] or [-obs_var name]
       [-msg_typ name]
       [-dotsize val]
       [-log file]
       [-v level]
</pre></div>
</div>
<p>plot_point_obs has two required arguments and can take optional ones.</p>
<div class="section" id="required-arguments-for-plot-point-obs">
<h4><span class="section-number">27.1.1.1. </span>Required arguments for plot_point_obs<a class="headerlink" href="#required-arguments-for-plot-point-obs" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>The <strong>nc_file</strong> argument indicates the name of the point observation file to be plotted. This file is the output from one of the point pre-processing tools, such as pb2nc.</p></li>
<li><p>The <strong>ps_file</strong> argument indicates the name given to the output file containing the plot.</p></li>
</ol>
</div>
<div class="section" id="optional-arguments-for-plot-point-obs">
<h4><span class="section-number">27.1.1.2. </span>Optional arguments for plot_point_obs<a class="headerlink" href="#optional-arguments-for-plot-point-obs" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple" start="3">
<li><p>The <strong>-config config_file</strong> option specifies the configuration file to be used. The contents of the optional configuration file are discussed below.</p></li>
<li><p>The <strong>-point_obs file</strong> option is used to pass additional NetCDF point observation files to be plotted.</p></li>
<li><p>The <strong>-plot_grid name</strong> option defines the grid for plotting as a named grid, the path to a gridded data file, or an explicit grid specification string. This overrides the default global plotting grid. If configuring the tool to plot a base image, the path to the input gridded data file should be specified here.</p></li>
<li><p>The <strong>-title string</strong> option specifies the plot title string.</p></li>
<li><p>The <strong>-gc code</strong> and <strong>-obs_var name</strong> options specify observation types to be plotted. These overrides the corresponding configuration file entries.</p></li>
<li><p>The <strong>-msg_typ name</strong> option specifies the message type to be plotted. This overrides the corresponding configuration file entry.</p></li>
<li><p>The <strong>-dotsize val</strong> option sets the dot size. This overrides the corresponding configuration file entry.</p></li>
<li><p>The <strong>-log file</strong> option directs output and errors to the specified log file.</p></li>
<li><p>The <strong>-v level</strong> option indicates the desired level of verbosity. The value of “level” will override the default setting of 2. Setting the verbosity to 0 will make the tool run with no log messages, while increasing the verbosity will increase the amount of logging.</p></li>
</ol>
<p>An example of the plot_point_obs calling sequence is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>plot_point_obs sample_pb.nc sample_data.ps
</pre></div>
</div>
<p>In this example, the Plot-Point-Obs tool will process the input sample_pb.nc file and write a postscript file containing a plot to a file named sample_pb.ps.</p>
</div>
</div>
<div class="section" id="plot-point-obs-configuration-file">
<h3><span class="section-number">27.1.2. </span>plot_point_obs configuration file<a class="headerlink" href="#plot-point-obs-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>The default configuration file for the Plot-Point-Obs tool named <strong>PlotPointObsConfig_default</strong> can be found in the installed <em>share/met/config</em> directory. The contents of the configuration file are described in the subsections below.</p>
<p>Note that environment variables may be used when editing configuration files, as described in <a class="reference internal" href="reformat_point.html#pb2nc-configuration-file"><span class="std std-numref">Section 6.1.2</span></a> for the PB2NC tool.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>grid_data = {

   field = [];

   regrid = {
      to_grid    = NONE;
      method     = NEAREST;
      width      = 1;
      vld_thresh = 0.5;
      shape      = SQUARE;
   }

   grid_plot_info = {
      color_table   = &quot;MET_BASE/colortables/met_default.ctable&quot;;
      plot_min      = 0.0;
      plot_max      = 0.0;
      colorbar_flag = TRUE;
   }
}
</pre></div>
</div>
<p>The <strong>grid_data</strong> dictionary defines a gridded field of data to be plotted as a base image prior to plotting point locations on top of it. The data to be plotted is specified by the <strong>field</strong> array. If <strong>field</strong> is empty, no base image will be plotted. If <strong>field</strong> has length one, the requested data will be read from the input file specified by the <strong>-plot_grid</strong> command line argument.</p>
<p>The <strong>to_grid</strong> entry in the <strong>regrid</strong> dictionary specifies if and how the requested gridded data should be regridded prior to plotting. Please see <a class="reference internal" href="config_options.html#config-options"><span class="std std-numref">Section 4</span></a> for a description of the <strong>regrid</strong> dictionary options.</p>
<p>The <strong>grid_plot_info</strong> dictionary inside <strong>grid_data</strong> specifies the options for for plotting the gridded data. The options within <strong>grid_plot_info</strong> are described in <a class="reference internal" href="config_options.html#config-options"><span class="std std-numref">Section 4</span></a>.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>point_data = [
  { fill_color = [ 255, 0, 0 ]; }
];
</pre></div>
</div>
<p>The <strong>point_data</strong> entry is an array of dictionaries. Each dictionary may include a list of filtering, data processing, and plotting options, described below. For each input point observation, the tool checks the <strong>point_data</strong> filtering options in the order specified. The point information is added to the first matching array entry. The default entry simply specifies that all points be plotted red.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>msg_typ     = [];
sid_inc     = [];
sid_exc     = [];
obs_var     = [];
obs_quality = [];
</pre></div>
</div>
<p>The options listed above define filtering criteria for the input point observation strings. If empty, no filtering logic is applied. If a comma-separated list of strings is provided, only those observations meeting all of the criteria are included. The <strong>msg_typ</strong> entry specifies the message type. The <strong>sid_inc</strong> and <strong>sid_exc</strong> entries explicitly specify station id’s to be included or excluded. The <strong>obs_var</strong> entry specifies the observation variable names, and <strong>obs_quality</strong> specifies quality control strings.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>obs_gc      = [];
</pre></div>
</div>
<p>When using older point observation files which have GRIB codes, the <strong>obs_gc</strong> entry specifies a list of integer GRIB codes to be included.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>valid_beg   = &quot;&quot;;
valid_end   = &quot;&quot;;
</pre></div>
</div>
<p>The <strong>valid_beg</strong> and <strong>valid_end</strong> options are time strings which specify a range of dates to be included. When left to their default empty strings no time filtering is applied.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>lat_thresh  = NA;
lon_thresh  = NA;
elv_thresh  = NA;
hgt_thresh  = NA;
prs_thresh  = NA;
obs_thresh  = NA;
</pre></div>
</div>
<p>The options listed above define filtering thresholds for the input point observation values. The default NA thresholds always evaluate to true and therefore apply no filtering. The <strong>lat_thresh</strong> and <strong>lon_thresh</strong> thresholds filter the latitude and longitude of the point observations, respectively. The <strong>elv_thresh</strong> threshold filters by the station elevation. The <strong>hgt_thresh</strong> and <strong>prs_thresh</strong> thresholds filter by the observation height and pressure level. The <strong>obs_thresh</strong> threshold filters by the observation value.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>convert(x)    = x;
censor_thresh = [];
censor_val    = [];
</pre></div>
</div>
<p>The <strong>convert(x)</strong> function, <strong>censor_thresh</strong> option, and <strong>censor_val</strong> option may be specified separately for each <strong>point_data</strong> array entry to transform the observation values prior to plotting. These options are further described in <a class="reference internal" href="config_options.html#config-options"><span class="std std-numref">Section 4</span></a>.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dotsize(x) = 10;
</pre></div>
</div>
<p>The <strong>dotsize(x)</strong> function defines the size of the circle to be plotted as a function of the observation value. The default setting shown above defines the dot size as a constant value.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>line_color = [];
line_width = 1;
</pre></div>
</div>
<p>The <strong>line_color</strong> and <strong>line_width</strong> entries define the color and thickness of the outline for each circle plotted. When <strong>line_color</strong> is left as an empty array, no outline is drawn. Otherwise, <strong>line_color</strong> should be specified using 3 intergers between 0 and 255 to define the red, green, and blue components of the color.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fill_color = [];
fill_plot_info = { // Overrides fill_color
  flag          = FALSE;
  color_table   = &quot;MET_BASE/colortables/met_default.ctable&quot;;
  plot_min      = 0.0;
  plot_max      = 0.0;
  colorbar_flag = TRUE;
}
</pre></div>
</div>
<p>The circles are filled in based on the setting of the <strong>fill_color</strong> and <strong>fill_plot_info</strong> entries. As described above for <strong>line_color</strong>, if <strong>fill_color</strong> is empty, the points are not filled in. Otherwise, <strong>fill_color</strong> must be specified using 3 integers between 0 and 255. If <strong>fill_plot_info.flag</strong> is set to true, then its settings override <strong>fill_color</strong>. The <strong>fill_plot_info</strong> dictionary defines a colortable which is used to determine the color to be used based on the observation value.</p>
<p>Users are encouraged to define as many <strong>point_data</strong> array entries as needed to filter and plot the input observations in the way they would like. Each point observation is plotted using the options specified in the first matching array entry. Note that the filtering, processing, and plotting options specified inside each <strong>point_data</strong> array entry take precedence over ones specified at the higher level of configuration file context.</p>
<p>For each observation, this tool stores the observation latitude, longitude, and value. However, unless the <strong>dotsize(x)</strong> function is not constant or the <strong>fill_plot_info.flag</strong> entry is set to true, the observation value is simply set to a flag value. For each <strong>plot_data</strong> array entry, the tool stores and plots only the unique combination of observation latitude, longitude, and value. Therefore multiple obsevations at the same location will typically be plotted as a single circle.</p>
</div>
<div class="section" id="id1">
<h3><span class="section-number">27.1.3. </span>plot_point_obs configuration file<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>The default configuration file for the Plot-Point-Obs tool named <strong>PlotPointObsConfig_default</strong> can be found in the installed <em>share/met/config</em> directory. The contents of the configuration file are described in the subsections below.</p>
<p>Note that environment variables may be used when editing configuration files, as described in <a class="reference internal" href="reformat_point.html#pb2nc-configuration-file"><span class="std std-numref">Section 6.1.2</span></a> for the PB2NC tool.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>grid_data = {

   field = [];

   grid_plot_info = {
      color_table   = &quot;MET_BASE/colortables/met_default.ctable&quot;;
      plot_min      = 0.0;
      plot_max      = 0.0;
      colorbar_flag = TRUE;
   }
}
</pre></div>
</div>
<p>The <strong>grid_data</strong> dictionary defines a gridded field of data to be plotted as a base image prior to plotting point locations on top of it. The data to be plotted is specified by the <strong>field</strong> array. If <strong>field</strong> is empty, no base image will be plotted. If <strong>field</strong> has length one, the requested data will be read from the input file specified by the <strong>-plot_grid</strong> command line argument.</p>
<p>The <strong>grid_plot_info</strong> dictionary inside <strong>grid_data</strong> specifies the options for for plotting the gridded data. The options within <strong>grid_plot_info</strong> are described in <a class="reference internal" href="config_options.html#config-options"><span class="std std-numref">Section 4</span></a>.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>point_data = [
  { fill_color = [ 255, 0, 0 ]; }
];
</pre></div>
</div>
<p>The <strong>point_data</strong> entry is an array of dictionaries. Each dictionary may include a list of filtering, data processing, and plotting options, described below. For each input point observation, the tool checks the <strong>point_data</strong> filtering options in the order specified. The point information is added to the first matching array entry. The default entry simply specifies that all points be plotted red.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>msg_typ     = [];
sid_inc     = [];
sid_exc     = [];
obs_var     = [];
obs_quality = [];
</pre></div>
</div>
<p>The options listed above define filtering criteria for the input point observation strings. If empty, no filtering logic is applied. If a comma-separated list of strings is provided, only those observations meeting all of the criteria are included. The <strong>msg_typ</strong> entry specifies the message type. The <strong>sid_inc</strong> and <strong>sid_exc</strong> entries explicitly specify station id’s to be included or excluded. The <strong>obs_var</strong> entry specifies the observation variable names, and <strong>obs_quality</strong> specifies quality control strings.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>obs_gc      = [];
</pre></div>
</div>
<p>When using older point observation files which have GRIB codes, the <strong>obs_gc</strong> entry specifies a list of integer GRIB codes to be included.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>valid_beg   = &quot;&quot;;
valid_end   = &quot;&quot;;
</pre></div>
</div>
<p>The <strong>valid_beg</strong> and <strong>valid_end</strong> options are time strings which specify a range of dates to be included. When left to their default empty strings no time filtering is applied.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>lat_thresh  = NA;
lon_thresh  = NA;
elv_thresh  = NA;
hgt_thresh  = NA;
prs_thresh  = NA;
obs_thresh  = NA;
</pre></div>
</div>
<p>The options listed above define filtering thresholds for the input point observation values. The default NA thresholds always evaluate to true and therefore apply no filtering. The <strong>lat_thresh</strong> and <strong>lon_thresh</strong> thresholds filter the latitude and longitude of the point observations, respectively. The <strong>elv_thresh</strong> threshold filters by the station elevation. The <strong>hgt_thresh</strong> and <strong>prs_thresh</strong> thresholds filter by the observation height and pressure level. The <strong>obs_thresh</strong> threshold filters by the observation value.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>convert(x)    = x;
censor_thresh = [];
censor_val    = [];
</pre></div>
</div>
<p>The <strong>convert(x)</strong> function, <strong>censor_thresh</strong> option, and <strong>censor_val</strong> option may be specified separately for each <strong>point_data</strong> array entry to transform the observation values prior to plotting. These options are further described in <a class="reference internal" href="config_options.html#config-options"><span class="std std-numref">Section 4</span></a>.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dotsize(x) = 10;
</pre></div>
</div>
<p>The <strong>dotsize(x)</strong> function defines the size of the circle to be plotted as a function of the observation value. The default setting shown above defines the dot size as a constant value.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>line_color = [];
line_width = 1;
</pre></div>
</div>
<p>The <strong>line_color</strong> and <strong>line_width</strong> entries define the color and thickness of the outline for each circle plotted. When <strong>line_color</strong> is left as an empty array, no outline is drawn. Otherwise, <strong>line_color</strong> should be specified using 3 intergers between 0 and 255 to define the red, green, and blue components of the color.</p>
<hr class="docutils" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fill_color = [];
fill_plot_info = { // Overrides fill_color
  flag          = FALSE;
  color_table   = &quot;MET_BASE/colortables/met_default.ctable&quot;;
  plot_min      = 0.0;
  plot_max      = 0.0;
  colorbar_flag = TRUE;
}
</pre></div>
</div>
<p>The circles are filled in based on the setting of the <strong>fill_color</strong> and <strong>fill_plot_info</strong> entries. As described above for <strong>line_color</strong>, if <strong>fill_color</strong> is empty, the points are not filled in. Otherwise, <strong>fill_color</strong> must be specified using 3 integers between 0 and 255. If <strong>fill_plot_info.flag</strong> is set to true, then its settings override <strong>fill_color</strong>. The <strong>fill_plot_info</strong> dictionary defines a colortable which is used to determine the color to be used based on the observation value.</p>
<p>Users are encouraged to define as many <strong>point_data</strong> array entries as needed to filter and plot the input observations in the way they would like. Each point observation is plotted using the options specified in the first matching array entry. Note that the filtering, processing, and plotting options specified inside each <strong>point_data</strong> array entry take precedence over ones specified at the higher level of configuration file context.</p>
<p>For each observation, this tool stores the observation latitude, longitude, and value. However, unless the <strong>dotsize(x)</strong> function is not constant or the <strong>fill_plot_info.flag</strong> entry is set to true, the observation value is simply set to a flag value. For each <strong>plot_data</strong> array entry, the tool stores and plots only the unique combination of observation latitude, longitude, and value. Therefore multiple obsevations at the same location will typically be plotted as a single circle.</p>
</div>
<div class="section" id="plot-data-plane-usage">
<span id="id2"></span><h3><span class="section-number">27.1.4. </span>plot_data_plane usage<a class="headerlink" href="#plot-data-plane-usage" title="Permalink to this headline">¶</a></h3>
<p>The usage statement for the plot_data_plane utility is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage: plot_data_plane
       input_filename
       output_filename
       field_string
       [-color_table color_table_name]
       [-plot_range min max]
       [-title title_string]
       [-log file]
       [-v level]
</pre></div>
</div>
<p>plot_data_plane has two required arguments and can take optional ones.</p>
<div class="section" id="required-arguments-for-plot-data-plane">
<h4><span class="section-number">27.1.4.1. </span>Required arguments for plot_data_plane<a class="headerlink" href="#required-arguments-for-plot-data-plane" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>The <strong>input_filename</strong> argument indicates the name of the gridded data file to be plotted.</p></li>
<li><p>The <strong>output_filename</strong> argument indicates the name given to the output PostScript file containing the plot.</p></li>
<li><p>The <strong>field_string</strong> argument contains information about the field and level to be plotted.</p></li>
</ol>
</div>
<div class="section" id="optional-arguments-for-plot-data-plane">
<h4><span class="section-number">27.1.4.2. </span>Optional arguments for plot_data_plane<a class="headerlink" href="#optional-arguments-for-plot-data-plane" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple" start="4">
<li><p>The <strong>-color_table color_table_name</strong> overrides the default color table (<em>MET_BASE/colortables/met_default.ctable</em>)</p></li>
<li><p>The <strong>-plot_range min max</strong> sets the minimum and maximum values to plot.</p></li>
<li><p>The <strong>-title title_string</strong> sets the title text for the plot.</p></li>
<li><p>The <strong>-log file</strong> option directs output and errors to the specified log file. All messages will be written to that file as well as standard out and error. Thus, users can save the messages without having to redirect the output on the command line. The default behavior is no logfile.</p></li>
<li><p>The <strong>-v level</strong> option indicates the desired level of verbosity. The value of “level” will override the default setting of 2. Setting the verbosity to 0 will make the tool run with no log messages, while increasing the verbosity will increase the amount of logging.</p></li>
</ol>
<p>An example of the plot_data_plane calling sequence is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>plot_data_plane test.grb test.ps &#39;name=&quot;TMP&quot;; level=&quot;Z2&quot;;&#39;
</pre></div>
</div>
<p>A second example of the plot_data_plane calling sequence is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>plot_data_plane test.grb2 test.ps &#39;name=&quot;DSWRF&quot;; level=&quot;L0&quot;;&#39; -v 4
</pre></div>
</div>
<p>In the first example, the Plot-Data-Plane tool will process the input test.grb file and write a PostScript image to a file named test.ps showing temperature at 2 meters. The second example plots downward shortwave radiation flux at the surface. The second example is run at verbosity level 4 so that the user can inspect the output and make sure its plotting the intended record.</p>
</div>
</div>
<div class="section" id="plot-mode-field-usage">
<h3><span class="section-number">27.1.5. </span>plot_mode_field usage<a class="headerlink" href="#plot-mode-field-usage" title="Permalink to this headline">¶</a></h3>
<p>The usage statement for the plot_mode_field utility is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Usage: plot_mode_field
       mode_nc_file_list
       -raw | -simple | -cluster
       -obs | -fcst
       -config file
       [-log file]
       [-v level]
</pre></div>
</div>
<p>plot_mode_field has four required arguments and can take optional ones.</p>
<div class="section" id="required-arguments-for-plot-mode-field">
<h4><span class="section-number">27.1.5.1. </span>Required arguments for plot_mode_field<a class="headerlink" href="#required-arguments-for-plot-mode-field" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p>The <strong>mode_nc_file_list</strong> specifies the MODE output files to be used for plotting.</p></li>
<li><p>The <strong>-raw | -simple | -cluster</strong> argument indicates the types of fields to be plotted. Exactly one must be specified. For details about the types of objects, see the section in this document on MODE.</p></li>
<li><p>The <strong>-obs | -fcst</strong> option specifies whether to plot the observed or forecast field from the MODE output files. Exactly one must be specified.</p></li>
<li><p>The <strong>-config file</strong> specifies the configuration file to use for specification of plotting options.</p></li>
</ol>
</div>
<div class="section" id="optional-arguments-for-plot-mode-field">
<h4><span class="section-number">27.1.5.2. </span>Optional arguments for plot_mode_field<a class="headerlink" href="#optional-arguments-for-plot-mode-field" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple" start="5">
<li><p>The <strong>-log file</strong> option directs output and errors to the specified log file. All messages will be written to that file as well as standard out and error. Thus, users can save the messages without having to redirect the output on the command line. The default behavior is no logfile.</p></li>
<li><p>The <strong>-v level</strong> option indicates the desired level of verbosity. The value of “level” will override the default. Setting the verbosity to 0 will make the tool run with no log messages, while increasing the verbosity will increase the amount of logging.</p></li>
</ol>
<p>An example of the plot_mode_field calling sequence is shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>plot_mode_field -simple -obs -config \
plotMODEconfig mode_120000L_20050807_120000V_000000A_obj.nc
</pre></div>
</div>
<p>In this example, the plot_mode_field tool will plot simple objects from an observed precipitation field using parameters from the configuration file plotMODEconfig and objects from the MODE output file mode_120000L_20050807_120000V_000000A_obj.nc. An example plot showing twelve simple observed precipitation objects is shown below.</p>
<div class="figure align-default" id="id4">
<span id="plotting-fig1"></span><img alt="../_images/plotting_fig1.png" src="../_images/plotting_fig1.png" />
<p class="caption"><span class="caption-number">Figure 27.1 </span><span class="caption-text">Simple observed precipitation objects</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Once MET has been applied to forecast and observed fields (or observing locations), and the output has been sorted through the Analysis Tool, numerous graphical and summary analyses can be performed depending on a specific user’s needs. Here we give some examples of graphics and summary scores that one might wish to compute with the given output of MET and MET-TC. Any computing language could be used for this stage; some scripts will be provided on the <a class="reference external" href="https://dtcenter.org/community-code/model-evaluation-tools-met">MET users web page</a> as examples to assist users.</p>
</div>
</div>
</div>
<div class="section" id="examples-of-plotting-met-output">
<h2><span class="section-number">27.2. </span>Examples of plotting MET output<a class="headerlink" href="#examples-of-plotting-met-output" title="Permalink to this headline">¶</a></h2>
<div class="section" id="grid-stat-tool-examples">
<h3><span class="section-number">27.2.1. </span>Grid-Stat tool examples<a class="headerlink" href="#grid-stat-tool-examples" title="Permalink to this headline">¶</a></h3>
<p>The plots in <a class="reference internal" href="#plotting-gilbert-skill-score"><span class="std std-numref">Figure 27.2</span></a> show time series of frequency bias and Gilbert Skill Score, stratified according to time of day. This type of figure is particularly useful for diagnosing problems that are tied to the diurnal cycle. In this case, two of the models (green dash-dotted and black dotted lines) show an especially high Bias (near 3) during the afternoon (15-21 UTC; left panel), while the skill (GSS; right panel) appears to be best for the models represented by the solid black line and green dashed lines in the morning (09-15 UTC). Note that any judgment of skill based on GSS should be restricted to times when the Bias is close to one.</p>
<div class="figure align-default" id="id5">
<span id="plotting-gilbert-skill-score"></span><img alt="../_images/plotting_Gilbert_skill_score.gif" src="../_images/plotting_Gilbert_skill_score.gif" />
<p class="caption"><span class="caption-number">Figure 27.2 </span><span class="caption-text">Time series of forecast area bias and Gilbert Skill Score for four model configurations (different lines) stratified by time-of-day.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="mode-tool-examples">
<h3><span class="section-number">27.2.2. </span>MODE tool examples<a class="headerlink" href="#mode-tool-examples" title="Permalink to this headline">¶</a></h3>
<p>When using the MODE tool, it is possible to think of matched objects as hits and unmatched objects as false alarms or misses depending on whether the unmatched object is from the forecast or observed field, respectively. Because the objects can have greatly differing sizes, it is useful to weight the statistics by the areas, which are given in the output as numbers of grid squares. When doing this, it is possible to have different matched observed object areas from matched forecast object areas so that the number of hits will be different depending on which is chosen to be a hit. When comparing multiple forecasts to the same observed field, it is perhaps wise to always use the observed field for the hits so that there is consistency for subsequent comparisons. Defining hits, misses and false alarms in this way allows one to compute many traditional verification scores without the problem of small-scale discrepancies; the matched objects are defined as being matched because they are “close” by the fuzzy logic criteria. Note that scores involving the number of correct negatives may be more difficult to interpret as it is not clear how to define a correct negative in this context. It is also important to evaluate the number and area attributes for these objects in order to provide a more complete picture of how the forecast is performing.</p>
<p><a class="reference internal" href="#plotting-verification"><span class="std std-numref">Figure 27.3</span></a> gives an example of two traditional verification scores (Bias and CSI) along with bar plots showing the total numbers of objects for the forecast and observed fields, as well as bar plots showing their total areas. These data are from the same set of 13-km WRF model runs analyzed in <a class="reference internal" href="#plotting-verification"><span class="std std-numref">Figure 27.3</span></a>. The model runs were initialized at 0 UTC and cover the period 15 July to 15 August 2005. For the forecast evaluation, we compared 3-hour accumulated precipitation for lead times of 3-24 hours to Stage II radar-gauge precipitation. Note that for the 3-hr lead time, indicated as the 0300 UTC valid time in <a class="reference internal" href="#plotting-gilbert-skill-score"><span class="std std-numref">Figure 27.2</span></a>, the Bias is significantly larger than the other lead times. This is evidenced by the fact that there are both a larger number of forecast objects, and a larger area of forecast objects for this lead time, and only for this lead time. Dashed lines show about 2 bootstrap standard deviations from the estimate.</p>
<div class="figure align-default" id="id6">
<span id="plotting-verification"></span><img alt="../_images/plotting_verification.gif" src="../_images/plotting_verification.gif" />
<p class="caption"><span class="caption-number">Figure 27.3 </span><span class="caption-text">Traditional verification scores applied to output of the MODE tool, computed by defining matched observed objects to be hits, unmatched observed objects to be misses, and unmatched forecast objects to be false alarms; weighted by object area. Bar plots show numbers (penultimate row) and areas (bottom row) of observed and forecast objects, respectively.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>In addition to the traditional scores, MODE output allows more information to be gleaned about forecast performance. It is even useful when computing the traditional scores to understand how much the forecasts are displaced in terms of both distance and direction. <a class="reference internal" href="#plotting-histogram"><span class="std std-numref">Figure 27.4</span></a>, for example, shows circle histograms for matched objects. The petals show the percentage of times the forecast object centroids are at a given angle from the observed object centroids. In <a class="reference internal" href="#plotting-histogram"><span class="std std-numref">Figure 27.4</span></a> (top diagram) about 25% of the time the forecast object centroids are west of the observed object centroids, whereas in <a class="reference internal" href="#plotting-histogram"><span class="std std-numref">Figure 27.4</span></a> (bottom diagram) there is less bias in terms of the forecast objects’ centroid locations compared to those of the observed objects, as evidenced by the petals’ relatively similar lengths, and their relatively even dispersion around the circle. The colors on the petals represent the proportion of centroid distances within each colored bin along each direction. For example, <a class="reference internal" href="#plotting-histogram"><span class="std std-numref">Figure 27.4</span></a> (top row) shows that among the forecast object centroids that are located to the West of the observed object centroids, the greatest proportion of the separation distances (between the observed and forecast object centroids) is greater than 20 grid squares.</p>
<div class="figure align-default" id="id7">
<span id="plotting-histogram"></span><img alt="../_images/plotting_fig4.jpg" src="../_images/plotting_fig4.jpg" />
<p class="caption"><span class="caption-number">Figure 27.4 </span><span class="caption-text">Circle histograms showing object centroid angles and distances (see text for explanation).</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="tc-stat-tool-example">
<span id="id3"></span><h3><span class="section-number">27.2.3. </span>TC-Stat tool example<a class="headerlink" href="#tc-stat-tool-example" title="Permalink to this headline">¶</a></h3>
<p>There is a basic R script located in the MET installation, <em>share/met/Rscripts/plot_tcmpr.R</em>. The usage statement with a short description of the options for <em>plot_tcmpr.R</em> can be obtained by typing: Rscript <em>plot_tcmpr.R</em> with no additional arguments. The only required argument is the <strong>-lookin</strong> source, which is the path to the TC-Pairs TCST output files. The R script reads directly from the TC-Pairs output, and calls TC-Stat directly for filter jobs specified in the <em>“-filter options”</em> argument.</p>
<p>In order to run this script, the MET_INSTALL_DIR environment variable must be set to the MET installation directory and the MET_BASE environment variable must be set to the <em>MET_INSTALL_DIR/share/met</em> directory. In addition, the Tc-Stat tool under <em>MET_INSTALL_DIR/bin</em> must be in your system path.</p>
<p>The supplied R script can generate a number of different plot types including boxplots, mean, median, rank, and relative performance. Pairwise differences can be plotted for the boxplots, mean, and median. Normal confidence intervals are applied to all figures unless the no_ci option is set to TRUE. Below are two example plots generated from the tools.</p>
<div class="figure align-default" id="id8">
<span id="plotting-fig5"></span><img alt="../_images/plotting_fig5.jpg" src="../_images/plotting_fig5.jpg" />
<p class="caption"><span class="caption-number">Figure 27.5 </span><span class="caption-text">Example boxplot from plot_tcmpr.R. Track error distributions by lead time for three operational models GFNI, GHMI, HFWI.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id9">
<span id="plotting-fig6"></span><img alt="../_images/plotting_fig6.jpg" src="../_images/plotting_fig6.jpg" />
<p class="caption"><span class="caption-number">Figure 27.6 </span><span class="caption-text">Example mean intensity error with confidence intervals at 95% from plot_tcmpr.R. Raw intensity error by lead time for a homogeneous comparison of two operational models GHMI, HWFI.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="refs.html" class="btn btn-neutral float-right" title="28. References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rmw-analysis.html" class="btn btn-neutral" title="26. RMW-Analysis Tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, UCAR/NCAR, NOAA, CSU/CIRA, and CU/CIRES.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
     
<script>var version_json_loc = "../../versions.json";</script>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/pop_ver.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>